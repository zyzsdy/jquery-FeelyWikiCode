jQuery.feelywiki={titleElem:"title",wikiPrefix:"/wiki/",init:function(e){if(e.titleElem!=undefined&&e.titleElem!="")this.titleElem=e.titleElem;if(e.wikiPrefix!=undefined&&e.wikiPrefix!="")this.wikiPrefix=e.wikiPrefix},start:function(e){var r=e.split("\n\n");for(var t=0;t<r.length;t++){r[t]=this.__lineProcess(r[t])}return r.filter(function(e){return e!=""}).join("")},__lineProcess:function(e){var r=false;var t=[];e=e.replace(/\(\:title (.+)\:\)/gi,this.__setTitle);e=e.replace(/\{%(.+?)% (.+?)\}/gi,function(){r=true;var e=[];arguments[1].split(" ").forEach(function(r){var t=r.split("=");if(t[0]=="color")e["color"]=t[1];if(t[0]=="size")e["font-size"]=t[1]});return jQuery.feelywiki.__setStyle("<span>"+arguments[2]+"</span>",e)});e=e.replace(/%(.+?)%/gi,function(){var e=[];arguments[1].split(" ").forEach(function(r){var t=r.split("=");if(t[0]=="align")e["text-align"]=t[1];if(t[0]=="color")e["color"]=t[1];if(t[0]=="size")e["font-size"]=t[1];if(t[0]=="float")e["float"]=t[1]});t=e;return""});if(!r){var i=this.__notParagraph(e);if(i!="")return this.__setStyle(i,t)}e=e.replace(/'''''(.+)'''''/gi,"<b><i>$1</i></b>");e=e.replace(/'''(.+)'''/gi,"<b>$1</b>");e=e.replace(/''(.+)''/gi,"<i>$1</i>");e=e.replace(/\{_(.+)_\}/gi,"<u>$1</u>");e=e.replace(/\{~(.+)~\}/gi,"<del>$1</del>");e=e.replace(/\{\+\+(.+)\+\+\}/gi,"<big><big>$1</big></big>");e=e.replace(/\{--(.+)--\}/gi,"<small><small>$1</small></small>");e=e.replace(/\{\+(.+)\+\}/gi,"<big>$1</big>");e=e.replace(/\{-(.+)-\}/gi,"<small>$1</small>");e=e.replace(/\[\[(http[s]?:\/\/.+) \| (http[s]?:\/\/.+\.(jpg|png|gif|jpeg)) x(\d+)\]\]/gi,function(){return'<a href="'+arguments[1]+'" target="_blank"><img src="'+arguments[2]+'" width="'+arguments[4]+'"></a>'});e=e.replace(/\[\[(http[s]?:\/\/.+) \| (http[s]?:\/\/.+\.(jpg|png|gif|jpeg))\]\]/gi,function(){return'<a href="'+arguments[1]+'" target="_blank"><img src="'+arguments[2]+'"></a>'});e=e.replace(/\[\[(http[s]?:\/\/.+) \| (.+)\]\]/gi,function(){return'<a href="'+arguments[1]+'" target="_blank">'+arguments[2]+"</a>"});e=e.replace(/\[\[(.+) \| (.+)\]\]/gi,function(){return'<a href="'+jQuery.feelywiki.wikiPrefix+arguments[1]+'">'+arguments[2]+"</a>"});e=e.replace(/\[\[(http[s]?:\/\/.+\.(jpg|png|gif|jpeg)) x(\d+)\]\]/gi,function(){return'<img src="'+arguments[1]+'" width="'+arguments[3]+'">'});e=e.replace(/\[\[(http[s]?:\/\/.+\.(jpg|png|gif|jpeg))\]\]/gi,function(){return'<img src="'+arguments[1]+'">'});e=e.replace(/\[\[(http[s]?:\/\/.+)\]\]/gi,function(){return'<a href="'+arguments[1]+'" target="_blank">'+arguments[1]+"</a>"});e=e.replace(/\[\[(.+)\]\]/gi,function(){return'<a href="'+jQuery.feelywiki.wikiPrefix+arguments[1]+'">'+arguments[1]+"</a>"});if(e!="")e="<p>"+e+"</p>";return this.__setStyle(e,t)},__notParagraph:function(e){var r=false;var t="n";var i=false;var n=false;var a=e.replace(/\{code=((.|\n)*)=\}/gim,function(){n=true;return"<code><pre>"+arguments[1]+"</pre></code>"});a=a.replace(/\{=((.|\n)*)=\}/gim,function(){n=true;return arguments[1]});if(n)return a;e=e.replace(/={7,}/gi,function(e){r=true;return"<hr>"});e=e.replace(/======(.+)======/gi,function(e,t){r=true;return"<h6>"+t+"</h6>"});e=e.replace(/=====(.+)=====/gi,function(e,t){r=true;return"<h5>"+t+"</h5>"});e=e.replace(/====(.+)====/gi,function(e,t){r=true;return"<h4>"+t+"</h4>"});e=e.replace(/===(.+)===/gi,function(e,t){r=true;return"<h3>"+t+"</h3>"});e=e.replace(/==(.+)==/gi,function(e,t){r=true;return"<h2>"+t+"</h2>"});e=e.replace(/=(.+)=/gi,function(e,t){r=true;return"<h1>"+t+"</h1>"});e=e.replace(/(# (.+).*)+/gi,function(){r=true;t="ol";return"<li>"+jQuery.feelywiki.__lineProcess(arguments[2])+"</li>"});e=e.replace(/(\* (.+).*)+/gi,function(){r=true;t="ul";return"<li>"+jQuery.feelywiki.__lineProcess(arguments[2])+"</li>"});if(t=="ol")e=e.replace(/<li>(.*)<\/li>(.|\n)*/gim,function(){return"<ol>"+arguments[0]+"</ol>"});else if(t=="ul")e=e.replace(/<li>(.*)<\/li>(.|\n)*/gim,function(){return"<ul>"+arguments[0]+"</ul>"});e=e.replace(/\|\|((.+)\|\|)+/gi,function(){r=true;i=true;var e=arguments[2].split("||");for(var t=0;t<e.length;t++){e[t]=jQuery.feelywiki.__lineProcess(e[t]);if(e[t][0]==":")e[t]=e[t].replace(/:(.*)/,"<th>$1</th>");else e[t]="<td>"+e[t]+"</td>"}return"<tr>"+e.join("")+"</tr>"});if(i)e=e.replace(/<tr>(.*)<\/tr>(.|\n)*/gim,function(){return'<table border="1">'+arguments[0]+"</table>"});if(r)return e;else return""},__setTitle:function(e,r){jQuery(jQuery.feelywiki.titleElem).html(r);return""},__setStyle:function(e,r){var t=[];for(var i in r){t.push(i+":"+r[i])}var n=t.join(";");return e.replace(/<(.+?)(( .+)*)>/,function(){return"<"+arguments[1]+' style="'+n+'"'+arguments[2]+">"})}};